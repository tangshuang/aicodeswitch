# PROJECT KNOWLEDGE BASE

**Generated:** 2026-01-20 16:21:39
**Commit:** N/A
**Branch:** main

## OVERVIEW
Web application with React UI, Express server for admin API, TypeScript, SQLite database, and LevelDB for logs.

## STRUCTURE
```
./
├── server/      # Express admin API server (proxy, database)
├── ui/          # React UI components (pages, styles, API client)
├── types/       # Shared TypeScript interfaces
├── dist/        # Build outputs (separate for ui, server)
├── backup/      # Backup code (older version)
├── documents/   # Documentation files
└── package.json # Project config and scripts
```

## WHERE TO LOOK
| Task | Location | Notes |
|------|----------|-------|
| Add API endpoint | server/proxy-server.ts | Update rules array and service mapping |
| Update UI page | ui/pages/ | React components with TypeScript |
| Change database schema | server/database.ts | SQLite table definitions |
| Add shared type | types/index.ts | Export from central index |
| Update build config | vite.config.ts | UI bundling with Vite |

## CODE MAP
| Symbol | Type | Location | Refs | Role |
|--------|------|----------|------|------|
| ProxyServer | class | server/proxy-server.ts | 2 | API routing and proxying |
| DatabaseManager | class | server/database.ts | 3 | Data persistence (SQLite + LevelDB) |

## CONVENTIONS
- Root-level source directories (server/, ui/) instead of src/
- Separate Express server for admin API
- Multiple TypeScript configs: main (UI), server, node
- Strict mode enabled across all TS configs (no unused locals/parameters)
- React JSX transform in UI code
- ES2020 target with modern syntax

## ANTI-PATTERNS (THIS PROJECT)
- No explicit anti-patterns documented in code comments
- yarn.lock warns against manual editing (autogenerated)

## UNIQUE STYLES
- UI directory instead of conventional src/
- Server colocated at root level
- API client uses REST communication
- Centralized type definitions in types/ directory

## COMMANDS
```bash
npm run dev        # Concurrent: dev:ui (Vite on 4567) + dev:server (Express on 4567)
npm run build      # Build all parts to dist/
npm run lint       # ESLint with TypeScript (0 warnings max)
```

## NOTES
- No tests implemented (test-free project)
- Environment: server on 127.0.0.1:4567, UI dev on 4567
- Database: better-sqlite3 for main data, level for logs
- Cross-cutting utilities: types/index.ts, ui/api/client.ts, server/database.ts, server/proxy-server.ts
- Config files: multiple tsconfig.*, vite.config.ts, package.json
- No CI/CD setup (GitHub Actions or similar)

## SERVER KNOWLEDGE BASE

**Generated:** 2026-01-20
**Commit:** N/A
**Branch:** main

## OVERVIEW
Express server providing admin API for proxy configuration and management.

## WHERE TO LOOK
| Task | Location | Notes |
|------|----------|-------|
| Add API endpoint | server/proxy-server.ts | Update rules array and service mapping |
| Update database schema | server/database.ts | SQLite table definitions |
| Modify server configuration | server/main.ts | Change port, middleware, or startup logic |
| Add request logging | server/database.ts | Use LevelDB for persistent logs |
| Implement proxy routing | server/proxy-server.ts | Configure route groups and transformations |

## CODE MAP
| Symbol | Type | Location | Refs | Role |
|--------|------|----------|------|------|
| ProxyServer | class | server/proxy-server.ts | 2 | API routing and proxying |
| DatabaseManager | class | server/database.ts | 3 | Data persistence (SQLite + LevelDB) |
| startServer | function | server/main.ts | 1 | Express server initialization |

## CONVENTIONS
- Express server with CORS enabled
- Large JSON payload limits (10MB)
- REST API versioning (/api/v1/)
- Dynamic proxy routing based on active route groups
- Encrypted export/import for data portability
- Graceful shutdown handling

## ANTI-PATTERNS
- No explicit anti-patterns documented in server code

## UNIQUE STYLES
- Dual database approach: SQLite for config, LevelDB for logs
- Request/response transformation via stored JS functions
- Comprehensive request logging with pagination

## NOTES
- Server runs on port 4567 for admin API
- Admin API distinct from proxy functionality
- Supports CRUD operations for all config entities
- Environment-specific configs possible